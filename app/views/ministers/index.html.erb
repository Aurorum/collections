<% add_view_stylesheet("ministers") %>

<% content_for :title, t("ministers.govuk_title") %>

<% page_class "ministers-index" %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render "govuk_publishing_components/components/title", {
      title: t("ministers.title"),
    } %>

    <% unless @presented_ministers.is_during_reshuffle? %>
      <%= render "govuk_publishing_components/components/lead_paragraph", {
        text: sanitize(@presented_ministers.lead_paragraph)
      } %>
    <% end %>
  </div>
</div>

<% if @presented_ministers.is_during_reshuffle? %>
  <%= render "govuk_publishing_components/components/notice", {
    description_govspeak: sanitize(@presented_ministers.reshuffle_messaging),
  } %>
<% else %>

<section class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/heading", {
      text: t("ministers.cabinet"),
      id: "cabinet-ministers",
      margin_bottom: 4,
      padding: true,
    } %>
  </div>

  <ul id="cabinet" class="govuk-list">
    <% @presented_ministers.cabinet_ministers.each_with_index do |minister, i| %>
      <% extra_class = (i % 4 == 0) ? " clear-column" : "" %>
      <li class="govuk-grid-column-one-quarter<%= extra_class %>">
        <div>
          <%= render "govuk_publishing_components/components/image_card", {
            href: minister.person_url,
            image_src: minister.image_url,
            image_alt: minister.image_alt,
            heading_text: minister.name,
            heading_level: 3,
            context: { text: minister.honorific },
            description: cabinet_minister_description(minister)
          } %>
        </div>
      </li>
    <% end %>
  </ul>
</section>

<section class="govuk-grid-row govuk-!-padding-top-9">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/heading", {
      text: t("ministers.also_attends"),
      id: "also-attends-cabinet-ministers",
      margin_bottom: 4,
      padding: true,
    } %>
  </div>

  <ul id="also-attends-cabinet" class="govuk-list">
    <% @presented_ministers.also_attends_cabinet.each_with_index do |minister, i| %>
    <% extra_class = (i % 4 == 0) ? " clear-column" : "" %>
    <li class="govuk-grid-column-one-quarter<%= extra_class %>">
      <div>
        <%= render "govuk_publishing_components/components/image_card", {
          href: minister.person_url,
          image_src: minister.image_url,
          image_alt: minister.image_alt,
          heading_text: minister.name,
          heading_level: 3,
          context: { text: minister.honorific },
          description: cabinet_minister_description(minister)
        } %>
      </div>
    </li>
    <% end %>
  </ul>
</section>

<section class="govuk-grid-row govuk-!-padding-top-9">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/heading", {
      text: t("ministers.by_department"),
      id: "ministers-by-department",
      margin_bottom: 4,
      padding: true,
    } %>
  </div>
</section>

<section class="govuk-grid-row govuk-!-padding-top-9">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/heading", {
      text: t("ministers.whips"),
      id: "whips",
      margin_bottom: 4,
      padding: true,
    } %>
  </div>
</section>
<% end %>
